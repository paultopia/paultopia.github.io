<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"><![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->
<head>
    <!-- Website Template designed by www.downloadwebsitetemplates.co.uk -->
    <!-- Modified to fit Cryogen.-->
    <meta charset="UTF-8">
    <title>Experiments in Tech Blogging (!!): Transducers for total beginners</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/ico/apple-touch-icon-72.png">
    <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57.png">
    <link rel="shortcut icon" href="images/ico/favicon.png">
    <!--[if IE]><![endif]-->
    <link href="/css/buttons.css" rel="stylesheet" type="text/css" />
    <link href="/css/menu.css" rel="stylesheet" type="text/css" />
    <link href="/css/reset.css" rel="stylesheet" type="text/css" />
    <link href="/css/style.css" rel="stylesheet" type="text/css" />
    <link href="/css/typography.css" rel="stylesheet" type="text/css" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/tomorrow-night-eighties.min.css">
    <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body>

<div id="left">

    <p id="logo">
        <a title="Experiments in Tech Blogging (!!)" href="/">
            <span class="fa fa-bolt"></span>
            <span class="text">Boom!</span>
        </a>
    </p>

    <div id="menucont" class="bodycontainer clearfix">
        <div class="menutitle">
            <p><span class="fa fa-reorder"></span><strong>Menu</strong></p>
        </div>
        <ul class="menu">
            <li ><a title="Home" href="/">Home</a></li>
            <li ><a title="Archives" href="/archives/">Archives</a></li>
            
            <li ><a title="Tags" href="/tags/">Tags</a></li>
            
            
            <li >
                <a href="/pages-output/about/">About</a>
            </li>
            
            <li><a title="RSS" href="/feed.xml">RSS</a></li>
        </ul>
    </div>

    <div id="socialmedia" class="clearfix">
        <ul>
            <li><a title="GitHub" href="https://github.com/paultopia" rel="external"><span class="fa fa-github"></span></a></li>
            <li><a title="Medium" href="https://medium.com/@PaulGowder" rel="external"><span class="fa fa-medium"></span></a></li>
            <li><a title="Twitter" href="https://twitter.com/PaulGowder" rel="external"><span class="fa fa-twitter"></span></a></li>
            <li><a title="LinkedIn" href="http://www.linkedin.com/in/paulgowder" rel="external"><span class="fa fa-linkedin"></span></a></li>
            <li><a title="Yelp" href="https://www.yelp.com/user_details?userid=uO6VkmLx-ESl-_8lFMmZRA" rel="external"><span class="fa fa-yelp"></span></a></li>
        </ul>
    </div>
    
</div>

<div id="right" class="clearfix">
    
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <strong>December 5, 2016</strong>
        
    </div>
    <h1>Transducers for total beginners</h1>
</div>
<div>
    
     <p>"Transducer" has to be the most intimidating name in all Clojure-land. For everyday use, however, they're really simple. (I don't get the truly fancy stuff, like writing one's own transducers, or getting them to hold state.)  </p><p>The simple "for beginners" (recommended experience level: you know how to use map and reduce and function composition and the threading macro) flavor of transducers is: like function composition, but with some more fancy. </p><p>This blog post is an attempted translation of the basic parts of the <a href='http://clojure.org/reference/transducers'>Clojure documentation page on transducers</a> into more comprehensible terms that don't require you to be as smart as Rich Hickey to understand.</p><p>So one way to think of transducers is just as a different way of doing ordinary function composition, but where you don't have to explicitly call "partial" to do partial application for those sequence functions that support the special one-less-arity-makes-a-transducer powers, and also they go in a different order.</p><pre><code class="clojure">&#40;def transducer-math
  &#40;comp
   &#40;map #&#40;+ 5 %&#41;&#41;
   &#40;map #&#40;/ % 3&#41;&#41;&#41;&#41;

&#40;def composed-math
  &#40;comp
   &#40;partial map #&#40;+ 5 %&#41;&#41;
   &#40;partial map #&#40;/ % 3&#41;&#41;&#41;&#41;
</code></pre><p>Compare the two: </p><pre><code class="clojure">&#40;into &#91;&#93; &#40;composed-math &#91;1 2 3&#93;&#41;&#41;
</code></pre><pre><code class="clojure">&#40;into &#91;&#93; transducer-math &#91;1 2 3&#93;&#41;
</code></pre><p>Why are these different?  Because ordinary function composition runs backwards, like nesting, so it applies the division before the addition.  Transducer composition runs forward, the "natural order," like the arrow threading macro <code>-&gt;</code> does, so it applies the addition before the division.</p><p><code>transduce</code> is like <code>reduce</code>, with a bit of magic under the hood. The docs have stuff I don't even begin to understand in there, but what it seems to amount to is that it applies the transducer to the collection before reducing, i.e., you can replace <code>reduce</code> with <code>transduce transducer</code> and it will otherwise work. </p><pre><code class="clojure">&#40;def xf 
  &#40;comp 
   &#40;filter odd?&#41;
   &#40;filter #&#40;&gt; 5 %&#41;&#41;&#41;&#41;
</code></pre><pre><code class="clojure">&#40;transduce xf + &#40;range 10&#41;&#41;
</code></pre><pre><code class="clojure">&#40;reduce + &#40;range 10&#41;&#41;
</code></pre><pre><code class="clojure">&#40;transduce xf conj &#91;&#93; &#40;range 10&#41;&#41;
</code></pre><pre><code class="clojure">&#40;reduce conj &#91;&#93; &#40;range 10&#41;&#41;
</code></pre><p><code>eduction</code> seems to basically just mean "create a lazy sequence from applying the transducer to the collection" </p><pre><code class="clojure">&#40;take 2 &#40;eduction xf &#40;range 10&#41;&#41;&#41;
</code></pre><p>However, <code>sequence</code> does the same thing, so I have to confess to a bit of confusion as to what the differences are.</p><pre><code class="clojure">&#40;take 2 &#40;sequence xf &#40;range 10&#41;&#41;&#41;
</code></pre><p>Other advantages of transducers: you can apply them to core.async channels, so everything that comes in gets transformed. They're also potentially more efficient than ordinary nested calls and such, because they don't create intermediate sequences for all the steps (not even lazy ones).</p><p>For future reference, here's the list of the built-in higher-order sequence functions that make transducers when called with one less arity, straight from the docs:</p><ul><li>map</li><li>cat</li><li>mapcat</li><li>filter</li><li>remove</li><li>take</li><li>take-while</li><li>take-nth</li><li>drop</li><li>drop-while</li><li>replace</li><li>partition-by</li><li>partition-all</li><li>keep</li><li>keep-indexed</li><li>map-indexed</li><li>distinct</li><li>interpose</li><li>dedupe</li><li>random-sample</li></ul><p>Christophe Grand has also written <a href='https://github.com/cgrand/xforms'>tranducerific support for more core functions</a>. Right now they seem a little hard to understand (especially x/reduce!!) but reading the code is interesting...</p><p>Also, <a href='http://stackoverflow.com/questions/26317325/can-someone-explain-clojure-transducers-to-me-in-simple-terms'>this is a nice SO</a>.</p>
</div>

<div id="post-tags">
    <br/> 
    <b>Tags: </b>
    
    <a href="/tags-output/clojure/">clojure</a>
    
</div>

<br/>

    <div id="prev-next">
        
        <a class="button" href="/posts-output/destructuring/">&laquo; Clojure basics: destructuring</a>
        
        
        <a class="right button" href="/posts-output/cljs-macro-data/">Using macros to get data into Clojurescript front-end pages &raquo;</a>
        
    </div>

    


</div>

    <hr/>


<div id="footercont" class="clearfix">Copyright &copy; 2017 Paul Gowder
    <p>Powered by <a href="http://cryogenweb.org">Cryogen</a> | Free Website Template by <a title="free website templates" href="http://www.downloadwebsitetemplates.co.uk" rel="external">Download Website Templates</a></p>




</div>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/scripts.js" type="text/javascript"></script>


<!-- try to get heavy klipse stuff loaded only if post has executable content -->

<link href="/css/codemirror.css" rel="stylesheet" type="text/css" />
<script>
 window.klipse_settings = {
     selector: '.clojure',
     selector_eval_python_client: '.python'
 };
</script>
<script src="/js/klipse_plugin.js" type="text/javascript"></script>
<script src="/js/skulpt.min.js" type="text/javascript"></script>
<script src="/js/skulpt-stdlib.js" type="text/javascript"></script>






<!--
<script src="http://app.klipse.tech/plugin/js/klipse_plugin.js"></script>

<script src="http://www.skulpt.org/static/skulpt.min.js" type="text/javascript"></script>
<script src="http://www.skulpt.org/static/skulpt-stdlib.js" type="text/javascript"></script>
-->


</body>
</html>
